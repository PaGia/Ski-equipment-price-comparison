# 實作計畫

## 已完成功能

### Phase 1: 基礎建設 ✅
- [x] Express 伺服器建立
- [x] 前端介面（單頁應用）
- [x] Murasaki Sports 爬蟲
- [x] 基本價格比較功能

### Phase 2: 多店家支援 ✅
- [x] North Shore 店家爬蟲
- [x] 自訂店家新增功能
- [x] BASE 平台爬蟲（Puppeteer）
- [x] Shopify 平台爬蟲
- [x] 多幣別匯率轉換

### Phase 3: 進階功能 ✅
- [x] 店家分類管理
- [x] 爬取進度顯示
- [x] 價格驗證機制
- [x] 定時自動爬取（每日 06:00）
- [x] 雙重驗證（Axios + Puppeteer 比對）

### Phase 3.5: 商品分類系統 ✅ (2025-12-15)
- [x] 全域分類設定（勾選要追蹤的分類）
- [x] 智慧分類辨識（關鍵字 + URL 分析）
- [x] 手動分類系統（待分類介面）
- [x] 規則學習（從手動分類學習新關鍵字）
- [x] 分類過濾（只抓取啟用分類的商品）

### Phase 3.6: 分類精確度優化 (終極版) ✅ (2025-12-16)
- [x] **基礎架構升級**: 修改 `inferCategoryFromName` 支援麵包屑與 URL 優先判斷
- [x] **爬蟲邏輯更新**: 修改 `scraper.js` 抓取頁面麵包屑文字
- [x] **Shopify 爬蟲修復**: 移除 `skipKeywords`，新增 `productType` 欄位
- [x] **自動導航功能**: Puppeteer 爬蟲自動發現並遍歷分類頁面
- [x] **分類優先級更新**: 手動 > productType > 麵包屑 > URL > 關鍵字

## 待開發功能

### Phase 4: 使用者體驗
- [ ] 價格歷史記錄
- [ ] 降價通知（Email / LINE）
- [ ] 使用者收藏清單
- [ ] 商品評分/評論整合

### Phase 5: 擴展性
- [ ] 更多店家支援
- [ ] 國際化（多語言）
- [ ] 行動裝置 APP
- [ ] API 開放給第三方

### Phase 6: 效能優化
- [ ] 資料庫遷移（MongoDB / PostgreSQL）
- [ ] 快取機制（Redis）
- [ ] CDN 圖片快取
- [ ] 分散式爬蟲

## 技術債

### 高優先級
- [ ] scraper.js 檔案過大（3000+ 行），需重構拆分
- [ ] 錯誤處理需更完善
- [ ] 測試覆蓋率為 0%

### 中優先級
- [ ] 匯率需改為動態取得
- [ ] 前端需改用框架（Vue/React）
- [ ] API 需加入認證機制

### 低優先級
- [ ] TypeScript 重構
- [ ] Docker 容器化
- [ ] CI/CD 管線
